<div class="sidebar">
  <div class="sidebar-header">
    <div class="logo">
      <div class="logo-icon">ðŸ““</div>
      <h1>Chronicle Notes</h1>
    </div>
    <div class="search-box">
      <svg class="search-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
           stroke-width="2">
        <circle cx="11" cy="11" r="8"></circle>
        <path d="m21 21-4.35-4.35"></path>
      </svg>
      <input type="text" placeholder="Search all notes...">
    </div>
    <button (click)="modelService.toggleOpenNewNote()" class="new-note-btn">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <line x1="12" y1="5" x2="12" y2="19"></line>
        <line x1="5" y1="12" x2="19" y2="12"></line>
      </svg>
      New Note
    </button>
  </div>

  <div class="sidebar-menu">
    <div class="menu-item active">
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
      </svg>
      Home
    </div>
    <div (click)="modelService.toggleCalendar();" class="menu-item">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" width="20" height="20">
        <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
        <line x1="3" y1="10" x2="21" y2="10"/>
        <line x1="16" y1="2" x2="16" y2="6"/>
        <line x1="8" y1="2" x2="8" y2="6"/>
        <circle cx="8" cy="14" r="0.5" fill="currentColor"/>
        <circle cx="12" cy="14" r="0.5" fill="currentColor"/>
        <circle cx="16" cy="14" r="0.5" fill="currentColor"/>
        <circle cx="8" cy="18" r="0.5" fill="currentColor"/>
        <circle cx="12" cy="18" r="0.5" fill="currentColor"/>
        <circle cx="16" cy="18" r="0.5" fill="currentColor"/>
      </svg>
      Calendar
    </div>
    <div class="menu-item">
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
        <circle cx="12" cy="7" r="4"></circle>
      </svg>
      Tags
    </div>
    <div class="menu-item" (click)="toggleSublist()">
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path>
      </svg>
      <svg class="chevron" [class.expanded]="isSublistOpen" width="16" height="16" viewBox="0 0 24 24" fill="none"
           stroke="currentColor" stroke-width="2">
        <polyline points="9 18 15 12 9 6"></polyline>
      </svg>
      Notebooks
      <svg (click)="$event.stopPropagation(); openFolderAdder()" class="add-icon" width="16" height="16"
           viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <line x1="12" y1="5" x2="12" y2="19"></line>
        <line x1="5" y1="12" x2="19" y2="12"></line>
      </svg>
    </div>
  </div>
  @if (isSublistOpen && folders.length > 0) {
    <div class="sublist">
      @for (folder of folders; track folder) {
        <div class="submenu-item">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" [attr.stroke]="folder.colour" stroke-width="2">
            <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path>
          </svg>
          <p>{{ folder.name }}</p>
          <svg (click)="deleteFolder(folder)" width="16" height="16" viewBox="0 0 24 24" fill="none"
               stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
               class="delete-icon">
            <path d="M3 6h18"></path>
            <path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"></path>
            <path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"></path>
            <line x1="10" y1="11" x2="10" y2="17"></line>
            <line x1="14" y1="11" x2="14" y2="17"></line>
          </svg>
        </div>

      }
    </div>
  }

  <app-folder-adder></app-folder-adder>

  <div class="notes-section">
    <div class="section-title">ðŸ“‹ Agenda</div>
    <div class="note-card active">
      <div class="note-card-header">
        <div class="note-icon">ðŸ“„</div>
        <div class="note-card-content">
          <div class="note-card-title">{{activeNote?.title}}</div>
          <div class="note-card-desc">Discussed budget, deliverables, and timeline...</div>
        </div>
      </div>
      <div class="note-card-footer">
        <span class="note-date">Yesterday</span>
        <div style="display: flex; gap: 8px; align-items: center;">
          <span class="note-badge progress">Progress</span>
          <svg class="star-icon" width="14" height="14" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor"
               stroke-width="2">
            <polygon
              points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon>
          </svg>
        </div>
      </div>
    </div>

    <div class="section-title" style="margin-top: 24px;">âš¡ Action Items</div>
    <div class="note-card">
      <div class="note-card-header">
        <div class="note-icon">âœ…</div>
        <div class="note-card-content">
          <div class="note-card-title">Work Projects</div>
          <div class="note-card-desc">23-28</div>
        </div>
      </div>
      <div class="note-card-footer">
        <span class="note-date"></span>
        <span class="note-badge progress">Progress</span>
      </div>
    </div>

    <div class="note-card">
      <div class="note-card-header">
        <div class="note-icon">ðŸ›’</div>
        <div class="note-card-content">
          <div class="note-card-title">Grocery List</div>
          <div class="note-card-desc">31+08</div>
        </div>
      </div>
      <div class="note-card-footer">
        <span class="note-date"></span>
        <span class="note-badge critical">Critical</span>
      </div>
    </div>

    <div class="note-card">
      <div class="note-card-header">
        <div class="note-icon">ðŸ“š</div>
        <div class="note-card-content">
          <div class="note-card-title">Book Notes - Dune</div>
          <div class="note-card-desc">20+3</div>
        </div>
      </div>
      <div class="note-card-footer">
        <span class="note-date"></span>
        <span class="note-badge progress">Progress</span>
      </div>
    </div>
  </div>
</div>

@if (modelService.isOpenFolder$ | async) {
  <div class="modal-overlay">
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="add-notebook-title">
      <div class="modal-header">
        <h2 id="add-notebook-title" class="modal-title">Add New Notebook</h2>
        <button class="close-btn" type="button" (click)="closeFolder()" aria-label="Close">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
        </button>
      </div>

      <div class="modal-body">
        <div class="form-group">
          <label class="form-label" for="notebook-name">Notebook Name</label>
          <input id="notebook-name" [(ngModel)]="name" type="text" class="form-input" placeholder="Enter notebook name..." autofocus>
        </div>
        <div class="form-group">
          <label class="form-label">Folder Color</label>
          <div class="color-selector" role="radiogroup" aria-label="Choose a folder color">
            @for (c of colours; track c) {
              <button
                type="button"
                class="color-option"
                [class.selected]="colour === c"
                (click)="selectColour(c)"
                [attr.aria-checked]="colour === c"
                role="radio"
                [style.color]="c"
                title="Select color">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" [attr.stroke]="c" stroke-width="2" aria-hidden="true">
                  <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path>
                </svg>
              </button>
            }
          </div>
        </div>
      </div>

      <div class="modal-footer">
        <button type="button" class="btn btn-cancel" (click)="closeFolder()">Cancel</button>
        <button type="button" class="btn btn-primary" (click)="addNoteFolder()" [disabled]="!name.trim()">Save Notebook</button>
      </div>
    </div>
  </div>
}

